// link to project specs
//https://learn.fullstackacademy.com/workshop/5ad39b73b73d520004c190d7/content/5ad39b73b73d520004c190da/text
let tallstr = "Window facing an ill-kept front yard Plums on the tree heavy with nectar Prayers to summon the destroying angel Moon stuttering in the sky like film stuck in a projector And you You Twin prop airplanes passing loudly overhead Road to the airport two lanes clear Half the whole town gone for the summer Terrible silence coming down here And you You There is no deadline There is no schedule There is no plan we can fall back on The road this far can't be retraced There is no punch line anybody can tack on There are loose ends by the score What did I come down here for? You You Bad luck comes in from Tampa Bad luck comes in from Tampa On the back of a truck Doing ninety up the interstate We have bad dreams the night he rolls in We have bad dreams the night he rolls in And we try to keep our sprits high But they flag and they wane When the truck pulls up out front In the light spring rain And they sag like withering flowers Let the good times roll on Through these first few desperate hours Yeah the driver drops his cargo at the curb The driver drops his cargo at the curb And the sun peeks in Like a killer through the curtain And when cloven hoof prints turn up in the garden Yeah when cloven hoof prints turn up in the garden We keep up the good fight We keep our spirits light But they draw like flies And there's a stomach-churning shift In the way the land lies And they lean like towers On a hillside struggling to stand Through these first few desperate hours Yeah I've got you You've got whatever's left of me to get Our conversations are like minefields No one's found a safe way through one yet I spend a lot of money I buy you white gold We raise up a little roof Against the cold On Southwood Plantation Road Where at night the stars blow like milk across the sky Where the high wires drop Where the fat crows fly All night long you giggle and scream Your brown eyes deeper than a dream I am not going to lose you We are going to stay married In this house like a Louisiana graveyard Where nothing stays buried On Southwood Plantation Road Where the dead will walk again Put on their Sunday best And go with unsuspecting Christian men La la la la la Dug up a fifth of Hood River gin That stuff tastes like medicine But I'll take it It'll do On the couch in the living room all day long Music on the television playing our song And I'm in the mood The mood for you Turn the volume up real high All of that money look at it fly And you smoking like a chimney Shadows crawled across the living room's length I held onto you with a desperate strength With everything with everything in me And I handed you a drink of the lovely little thing On which our survival depends People say friends don't destroy one another What do they know about friends? Thunderclouds forming cream white moon Everything's going to be okay soon Maybe tomorrow Maybe the next day Carried you up the stairs that night All of this could be yours if the price is right I heard cars headed down to oblivion Up on the expressway Your drunken kisses as light as the air Maybe everything that falls down eventually rises Our house sinking into disrepair Ah but look at this showroom filled with fabulous prizes Look beyond the broken bottles Past the rotting wooden stairs Root out the wine-dark honeyed center Not everyone can live like millionaires Look through the air-thin walls Tear up the floorboards strip the paint Go over every inch of space With the patience of a saint Grab your hat get your coat The cellar door is an open throat Look past the kitchen cabinets Go through the chest of drawers Scrutinize the casements Rip the varnish off the doors Dig up the laughing photographs Theyre here somewhere or other Take what you can carry But let me tell you brother Still waters go stagnant Bodies bloat And the cellar door is an open throat This place with its old plantations These roads leading out to the sea This day full of promise and potential More clay pigeons for you and me All of them all of them All of them all of them All of them all of them all of them all of them All lined up Huge crows loitering by the curb Our shared paths unraveling behind us like ribbons And I dreamed of vultures In the trees around our house And cicadas and locusts And the shrieking of innumerable gibbons All of them all of them All of them all of them All of them all of them all of them all of them All lined up How long will we ride this wave out? How long 'til someone caves under the pressure? My dreams are haunted by armies armies of ghosts Faces too blurry to make out Numbers far too high to measure Your face like a vision straight out of Holly Hobby Late light drizzling through your hair Your eyes twin volcanoes Bad ideas dancing around in there All all of them all of them All of them all of them All of them all of them all of them all of them All lined up I hope that our few remaining friends Give up on trying to save us I hope we come up with a failsafe plot To piss off the dumb few that forgave us I hope the fences we mended Fall down beneath their own weight And I hope we hang on past the last exit I hope it's already too late And I hope the junkyard a few blocks from here Someday burns down And I hope the rising black smoke carries me far away And I never come back to this town Again in my life I hope I lie And tell everyone you were a good wife And I hope you die I hope we both die I hope I cut myself shaving tomorrow I hope it bleeds all day long Our friends say it's darkest before the sun rises We're pretty sure they're all wrong I hope it stays dark forever I hope the worst isn't over And I hope you blink before I do Yeah I hope I never get sober And I hope when you think of me years down the line You can't find one good thing to say And I'd hope that if I found the strength to walk out You'd stay the hell out of my way I am drowning There is no sign of land You are coming down with me Hand in unlovable hand And I hope you die I hope we both die I was driving up from Tampa When the radiator burst I was three sheets to the wind A civilian saw me first And then there was the cop And then the children standing on the corner Your love is like a cyclone in a swamp And the weather's getting warmer I was getting out of jail Heading to the Greyhound You said you'd hop on one yourself And meet me on the way down I was shaking way too hard to think Dead on my feet about to drop Went and got the case of vodka from a car And walked the two miles to the bus stop Got on the bus half drunk again The driver glared at me Met up with you in Inglis Thumbed a ride to Cedar Key If we never make it back to California I want you to know I love you But my love is like a dark cloud full of rain That's always right there up above you Hey! I hear them squeal I see them preen Fans all spread out Neat and clean Grab hold of the morning Head out to the porch Feel the wind stopping Feel the sun scorch I fear for my safety You can see it in my eyes In an hour or two We will rise Then a sharp breeze kicks up I hug myself hard How come there's peacocks in the front yard? Sun's all prickly On my neck When the helicopter passes We both hit the deck Hands grasping and groping Seizing opportunity Right where it lies The sky will fall We will rise My love is like a powder keg My love is like a powder keg in the corner of an empty warehouse Somewhere just outside of town About to burn down My love is like a Cuban plane My love is like a Cuban plane flying from Havana Up the Florida coast to the 'Glades Soviet made Our love is like the border between Greece and Albania Our love is like the border between Greece and Albania Trucks loaded down with weapons Crossing over every night Moon yellow and bright There is a shortage in the blood supply But there is no shortage of blood The way I feel about you baby can't explain it You got the best of my love Tile floor of the bathroom Scrubbed clean and bright Checkerboard white and grey Towels from the Ritz-Carlton hotel in Kingston Jamaica I can still see the rust colored stains today The stage is set Someone's going to do something someone else will regret I speak in smoke signals and you answer in code The fuse will have to run out sometime Something here will eventually have to explode Have to explode You and me lying on the tile floor Trying to keep cool Restless all night Sweating out the poison As the temperature climbs Staring up up at the hundred-watt light that burns above Name one thing about us two anyone could love We roll out the red carpet When rotten luck comes down the road Five four three two one Watch for the flash Something here will eventually have to explode Have to explode From the housetops to the gutters From the ocean to the shore The warning signs have all been bright and garish Far too great in number to ignore From the cities to the swamplands From the highways to the hills Our love has never had a leg to stand on From the aspirins to the cross-tops to the Elevils But I will walk down to the end with you If you will come all the way down with me From the entrance to the exit Is longer than it looks from where we stand I want to say I'm sorry for stuff I haven't done yet Things will shortly get completely out of hand I can feel it in the rotten air tonight In the tips of my fingers In the skin on my face In the weak last gasp of the evening's dying light In the way those eyes I've always loved illuminate this place Like a trashcan fire in a prison cell Like the searchlights in the parking lots of hell I will walk down to the end with you If you will come all the way down with me Well Guy in a skeleton costume Comes up to the guy in the Superman suit Runs through him with a broadsword I flipped the television off Bring all the bright lights up Turn the radio up loud I don't know why I'm so persuaded That if I think things through Long enough and hard enough I'll somehow get to you But then you came in and we locked eyes You kicked the ashtray over as we came toward each other Stubbed my cigarette out against the west wall Quickly lit another Look at that Would you look at that? We're throwing off sparks What will I do when I don't have you To hold onto in the dark? Yes Everybody's going to need a witness Everybody's going to need a little backup In case the scene gets nasty You throw the attic window open And I throw myself all around you And night comes to Tallahassee I don't know why it's gotten harder to keep myself away Thought I'd finally beat the feeling back It all came back today And then we fell down And we locked arms We knocked the dresser over as we rolled across the floor I don't mean it when I tell you That I don't love you any more Look at that Would you look at that? The way the ceiling starts to swerve What will I do when I don't have you When I finally get what I deserve? Ah the lengthening hours in the refinery Belching fire into the sky We do our best vampire routines As we suck the dying hours dry The night is lovely as a rose If I see sunlight hit you I am sure that we'll both decompose Ah the fitful sleep and the fire engines That I dream of when I dream Some day we'll both wake up for good I will try hard not to scream The evening wind will shake the blinds You're stirring from your slumber We've got something hateful on our minds Oh sing sing sing For the dying of the day Sing for the flames that will rip through here And the smoke that will carry us away Yeah sing for the damage we've done And the worse things that we'll do Open your mouth up and sing for me now And I will sing for you"


let mountainStr = 
    'The most remarkable thing about coming home to you Is the feeling of being in motion again; Its the most extraordinary thing in the world I have two big hands And a heart pumping blood And a nineteen sixty seven Colt forty five with a busted safety catch The world shines As I cross the Macon county line Going to Georgia The most remarkable thing about you standing in the doorway Is that its you and that you are standing in the doorway And you smile as you ease the gun from my hand I am frozen with joy right where I stand The world throws its light underneath your hair Forty miles from Atlanta This is nowhere Going to Georgia The world shines As I cross the Macon county line Going to Georgia'

let weakerStr = 'Just one more drink and then I should be on my way home Im not       entirely sure what youre talking about Ive had a really nice time, but my         dogs need to be fed I must say that in the right light, you look like             Shackleton Comment allez-vous ce soir? Je suis comme ci comme ça Yes, a           penguin taught me French Back in Antarctica I could show you the way shadows     colonize snow Ice breaking up on the bay off the Lassiter coast Light failing     over the pole as every longitude leads Up to your frostbitten feet, oh,           you\'re very sweet Thank you for the flowers And the book by Derrida But I       must be getting back To dear Antarctica Say do you have a ship and a dozen       able men That maybe you could lend me? Oh, Antarctica'

let testStr = "The quick brown fox jumps over the lazy dog"

//
//// function generating the markovObject
//const MarkovDictBuilder = (string) => {
//    //removes numbers and punctuation and converts to lowercase
//    let regNumandPunc = /[.,\/#!$%\^&\*;:{}=\-_`~()]/gi;
//    let cleanStr = string.toLowerCase().replace(regNumandPunc, '');
//
//    // splits string into array of words
//    let strArr = cleanStr.split(" ");
//
//    //interates through string creating the markov dictionary
//    const markovObjGen = () => {
//    let markObj = {};
//    
//    for(let i = 0; i < strArr.length-2; i++){
//        let currentWord = strArr[i];
//        let secondWord = strArr[i+1];
//        let thirdWord = strArr[i+2];
//        
//        let currentPhrase = `${currentWord} ${secondWord}`;
//        console.log(currentPhrase);
//        
//        if(markObj[currentPhrase]){
//            markObj[currentPhrase].push(thirdWord);
//                } else {
//                    markObj[currentPhrase] = [thirdWord];
//                }
//            }
//        return markObj;
//    }
//    return markovObjGen();
//} 
//  
//let mountainObj = MarkovDictBuilder(mountainStr);
//
//console.log(mountainObj);
//
//
////function writing each line
//const writeLine = (markObj, lengthNum) => {
//    let objKeysArr = Object.keys(markObj);
//    
//    //returns random word after input word
//    const randGen = (word) => {
//        return markObj[word][Math.floor(Math.random() * markObj[word].length)];
//    }
//    
//    let poemLineArr = [];
//    
//    //grabs random first word from object keys
//    let firstWord = objKeysArr[Math.floor(Math.random() * objKeysArr.length)];
//    poemLineArr.push(firstWord);
//    
//    //iterates through line length calling randGen for the next word
//    for(let i = 1; i <= lengthNum; i++){
//        poemLineArr.push(randGen(poemLineArr[i-1]));
//
//    }
//    
//    //joins words into a string and returns the string;
//    return poemLineArr.join(" ");
//    
//}
//
//// function repeating writeLine for the selected number of lines with the selected linelength
//const lineRepeater = (obj, lines, lineLength) => {
//    let poem = '';
//    for(let i = 0; i < lines; i++){
//        poem +=  `${writeLine(obj, lineLength)} \n`
//    }
//    
//    return poem;
//}


//random number generator between a max and min 
function randomNumGen(min, max)
{
    return Math.floor(Math.random()*(max - min + 1) + min);
}

// creates a poem from an input string if number of lines and length of lines isn't specified it returns a random number between a min and max
const poemMaker = (inputText, numLines = randomNumGen(4,8), numLength = randomNumGen(4, 7)) => {
    
    // function generating the markovObject
    const MarkovDictBuilder = () => {
    //removes numbers and punctuation and converts to lowercase
    let regNumandPunc = /[.,\/#!$%\^&\*;:{}=\-_`~()]/gi;
    let cleanStr = inputText.toLowerCase().replace(regNumandPunc, '');

    // splits string into array of words
    let strArr = cleanStr.split(" ");

    //interates through string creating the markov dictionary
    //keys are sets of two words, the first array in each element is also the two words so they can be searched seperately 
        const markovObjGen = () => {
        let markObj = {};

        for(let i = 0; i < strArr.length-1; i++){
            let currentWord = strArr[i];
            let secondWord = strArr[i+1];
            let thirdWord = strArr[i+2];
        
            let currentPhrase = [currentWord, secondWord];
        
            if(markObj[currentPhrase]){
                markObj[currentPhrase].push(thirdWord);
                    } else {
                        markObj[currentPhrase] = [currentPhrase, thirdWord];
                    }
                }
            return markObj;
            }
        return markovObjGen();
    }
    
    //function writing each line
    const writeLine = () => {
        let markObj = MarkovDictBuilder();
        let objKeysArr = Object.keys(markObj);
        
        console.log(markObj);
        
        //returns random word after input word
        const randGenWord = (word) => {

            let arrOfMatching = [];

            for(let i = 0; i < objKeysArr.length; i++){
                
                if(word === markObj[objKeysArr[i]][0][0]){
                    let matchArr = [markObj[objKeysArr[i]][0]];
                    let possibleNextWord = matchArr[0][1];
                    arrOfMatching.push(possibleNextWord);
                }
            }
            
            let nextWord = arrOfMatching[Math.floor(Math.random() * arrOfMatching.length)];
            
            return nextWord;
        }

        let poemLineArr = [];

        //grabs random first word from object keys
        let firstPhrase = objKeysArr[Math.floor(Math.random() * objKeysArr.length)];
        
        // pushes first word to the array
        poemLineArr.push(markObj[firstPhrase][0][0]);
        
        //pushes second word to the array
        poemLineArr.push(markObj[firstPhrase][0][1]);
        
        
        //iterates through line length calling randGen for the next word
        //if there isn't a next word a random word is used
        for(let i = 1; i < numLength-1; i++){
            let searchWord = poemLineArr[i];
            
            let nextWordinArr = randGenWord(searchWord);
            if(nextWordinArr === undefined){
                let randomWord = objKeysArr[Math.floor(Math.random() * objKeysArr.length)];
                nextWordinArr = markObj[randomWord][0][0];
            }
            
            poemLineArr.push(nextWordinArr);
        }
        
        console.log(poemLineArr);
        //joins words into a string and returns the string;
        poemStr = poemLineArr.join(" ");
        return poemStr.replace(",", '')
    }
    

    // function repeating writeLine for the selected number of lines with the selected linelength
    const lineRepeater = () => {
        let poem = '';
        for(let i = 0; i < numLines; i++){
            poem +=  `${writeLine()} \n`
        }
        
        return poem;
    }

    return lineRepeater();
}

console.log(poemMaker(tallstr, 4, 5));

